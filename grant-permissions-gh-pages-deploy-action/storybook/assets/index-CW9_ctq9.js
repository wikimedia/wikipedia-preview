var te=Object.defineProperty,ee=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var lt=Object.getOwnPropertySymbols;var kt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var At=(t,e,n)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e)=>{for(var n in e||(e={}))kt.call(e,n)&&At(t,n,e[n]);if(lt)for(var n of lt(e))Rt.call(e,n)&&At(t,n,e[n]);return t},_=(t,e)=>ee(t,ne(e));var mt=(t,e)=>{var n={};for(var o in t)kt.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&lt)for(var o of lt(t))e.indexOf(o)<0&&Rt.call(t,o)&&(n[o]=t[o]);return n};var N=(t,e,n)=>new Promise((o,i)=>{var r=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?o(u.value):Promise.resolve(u.value).then(r,s);a((n=n.apply(t,e)).next())});import{s as Tt,g as oe,r as Ft}from"./fullscreen-BpBWtCHS.js";import{i as B,a as ie,v as Mt,g as re,b as Lt,c as se,d as ce,e as le,f as ae}from"./utils-BsJDrmFG.js";import{r as ht,a as fe,c as ue,b as de,d as me}from"./preview-B0-780R1.js";const ge=t=>{let e=[],n=[];const o=(c,f)=>{const d=setTimeout(c,f);return n.push(d),d},i=()=>{n.forEach(c=>{clearTimeout(c)}),n=[]},r=(c,f,d,m=void 0)=>{c.addEventListener(f,d,m),e.push([c,f,d,m])},s=()=>{e.forEach(c=>{const[f,d,m,g]=c;f.removeEventListener(d,m,g)}),e=[]},a=c=>{const f=c.toElement||c.relatedTarget||c.target,d=t.element.currentTargetElement;if(f!==d&&!t.element.contains(f)){const m=o(t.hide,300),g=()=>{clearTimeout(m)};r(t.element,"mouseenter",g)}};return{onHide:()=>{t.lang=null,t.title=null,t.loading=!1;const c=t.element.querySelector(".wikipediapreview-body");c.style.transition="auto",s(),i()},onShow:c=>{if(c.component={body:c.querySelector(".wikipediapreview-body"),wikipediapreview:c.querySelector(".wikipediapreview"),wikipediapreviewHeaderImage:c.querySelector(".wikipediapreview-header-image"),wikipediapreviewGalleryImages:c.querySelectorAll(".wikipediapreview-gallery-image"),closeBtn:c.querySelector(".wikipediapreview-header-closebtn"),content:c.querySelector(".wikipediapreview-body > p"),scrollCue:c.querySelector(".wikipediapreview-scroll-cue")},c.component.wikipediapreviewGalleryImages&&c.component.wikipediapreviewGalleryImages.forEach(f=>{r(f,"click",d=>{const m=d.target.style.backgroundImage.slice(4,-1).replace(/"/g,"");Tt(t.media,m,t.lang,t.dir)})}),c.component.wikipediapreviewHeaderImage&&r(c.component.wikipediapreviewHeaderImage,"click",()=>{Tt(t.media,t.media[0].thumb,t.lang,t.dir)}),c.component.closeBtn&&r(c.component.closeBtn,"click",t.hide),B){const f=document.querySelector(".wp-dark-screen");r(f,"pointerup",t.hide,!0)}else r(c,"mouseleave",a),r(c.currentTargetElement,"mouseleave",a);c.component.scrollCue&&(ie(c.component.body)?r(c.component.body,"scroll",f=>{f.target.scrollTop>0&&c.component.scrollCue.remove()}):c.component.scrollCue.remove())}}},pe=["top","right","bottom","left"],Pt=["start","end"],Ct=pe.reduce((t,e)=>t.concat(e,e+"-"+Pt[0],e+"-"+Pt[1]),[]),X=Math.min,I=Math.max,ft=Math.round,Y=t=>({x:t,y:t}),he={left:"right",right:"left",bottom:"top",top:"bottom"},we={start:"end",end:"start"};function wt(t,e,n){return I(t,X(e,n))}function et(t,e){return typeof t=="function"?t(e):t}function j(t){return t.split("-")[0]}function V(t){return t.split("-")[1]}function It(t){return t==="x"?"y":"x"}function yt(t){return t==="y"?"height":"width"}function st(t){return["top","bottom"].includes(j(t))?"y":"x"}function xt(t){return It(st(t))}function ye(t,e,n){n===void 0&&(n=!1);const o=V(t),i=xt(t),r=yt(i);let s=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(s=Ot(s)),[s,Ot(s)]}function xe(t){return t.replace(/start|end/g,e=>we[e])}function Ot(t){return t.replace(/left|right|bottom|top/g,e=>he[e])}function ve(t){return C({top:0,right:0,bottom:0,left:0},t)}function vt(t){return typeof t!="number"?ve(t):{top:t,right:t,bottom:t,left:t}}function Z(t){const{x:e,y:n,width:o,height:i}=t;return{width:o,height:i,top:n,left:e,right:e+o,bottom:n+i,x:e,y:n}}function Dt(t,e,n){let{reference:o,floating:i}=t;const r=st(e),s=xt(e),a=yt(s),u=j(e),l=r==="y",c=o.x+o.width/2-i.width/2,f=o.y+o.height/2-i.height/2,d=o[a]/2-i[a]/2;let m;switch(u){case"top":m={x:c,y:o.y-i.height};break;case"bottom":m={x:c,y:o.y+o.height};break;case"right":m={x:o.x+o.width,y:f};break;case"left":m={x:o.x-i.width,y:f};break;default:m={x:o.x,y:o.y}}switch(V(e)){case"start":m[s]-=d*(n&&l?-1:1);break;case"end":m[s]+=d*(n&&l?-1:1);break}return m}const be=(t,e,n)=>N(null,null,function*(){const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:s}=n,a=r.filter(Boolean),u=yield s.isRTL==null?void 0:s.isRTL(e);let l=yield s.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=Dt(l,o,u),d=o,m={},g=0;for(let w=0;w<a.length;w++){const{name:y,fn:b}=a[w],{x:h,y:p,data:x,reset:v}=yield b({x:c,y:f,initialPlacement:o,placement:d,strategy:i,middlewareData:m,rects:l,platform:s,elements:{reference:t,floating:e}});c=h!=null?h:c,f=p!=null?p:f,m=_(C({},m),{[y]:C(C({},m[y]),x)}),v&&g<=50&&(g++,typeof v=="object"&&(v.placement&&(d=v.placement),v.rects&&(l=v.rects===!0?yield s.getElementRects({reference:t,floating:e,strategy:i}):v.rects),{x:c,y:f}=Dt(l,d,u)),w=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:m}});function Vt(t,e){return N(this,null,function*(){var n;e===void 0&&(e={});const{x:o,y:i,platform:r,rects:s,elements:a,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:m=0}=et(e,t),g=vt(m),y=a[d?f==="floating"?"reference":"floating":f],b=Z(yield r.getClippingRect({element:(n=yield r.isElement==null?void 0:r.isElement(y))==null||n?y:y.contextElement||(yield r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),h=f==="floating"?{x:o,y:i,width:s.floating.width,height:s.floating.height}:s.reference,p=yield r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating),x=(yield r.isElement==null?void 0:r.isElement(p))?(yield r.getScale==null?void 0:r.getScale(p))||{x:1,y:1}:{x:1,y:1},v=Z(r.convertOffsetParentRelativeRectToViewportRelativeRect?yield r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:h,offsetParent:p,strategy:u}):h);return{top:(b.top-v.top+g.top)/x.y,bottom:(v.bottom-b.bottom+g.bottom)/x.y,left:(b.left-v.left+g.left)/x.x,right:(v.right-b.right+g.right)/x.x}})}const Ee=t=>({name:"arrow",options:t,fn(n){return N(this,null,function*(){const{x:o,y:i,placement:r,rects:s,platform:a,elements:u,middlewareData:l}=n,{element:c,padding:f=0}=et(t,n)||{};if(c==null)return{};const d=vt(f),m={x:o,y:i},g=xt(r),w=yt(g),y=yield a.getDimensions(c),b=g==="y",h=b?"top":"left",p=b?"bottom":"right",x=b?"clientHeight":"clientWidth",v=s.reference[w]+s.reference[g]-m[g]-s.floating[w],k=m[g]-s.reference[g],E=yield a.getOffsetParent==null?void 0:a.getOffsetParent(c);let R=E?E[x]:0;(!R||!(yield a.isElement==null?void 0:a.isElement(E)))&&(R=u.floating[x]||s.floating[w]);const M=v/2-k/2,L=R/2-y[w]/2-1,A=X(d[h],L),S=X(d[p],L),T=A,q=R-y[w]-S,D=R/2-y[w]/2+M,z=wt(T,D,q),Q=!l.arrow&&V(r)!=null&&D!==z&&s.reference[w]/2-(D<T?A:S)-y[w]/2<0,ot=Q?D<T?D-T:D-q:0;return{[g]:m[g]+ot,data:C({[g]:z,centerOffset:D-z-ot},Q&&{alignmentOffset:ot}),reset:Q}})}});function Se(t,e,n){return(t?[...n.filter(i=>V(i)===t),...n.filter(i=>V(i)!==t)]:n.filter(i=>j(i)===i)).filter(i=>t?V(i)===t||(e?xe(i)!==i:!1):!0)}const Ae=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,fn(n){return N(this,null,function*(){var o,i,r;const{rects:s,middlewareData:a,placement:u,platform:l,elements:c}=n,A=et(t,n),{crossAxis:f=!1,alignment:d,allowedPlacements:m=Ct,autoAlignment:g=!0}=A,w=mt(A,["crossAxis","alignment","allowedPlacements","autoAlignment"]),y=d!==void 0||m===Ct?Se(d||null,g,m):m,b=yield Vt(n,w),h=((o=a.autoPlacement)==null?void 0:o.index)||0,p=y[h];if(p==null)return{};const x=ye(p,s,yield l.isRTL==null?void 0:l.isRTL(c.floating));if(u!==p)return{reset:{placement:y[0]}};const v=[b[j(p)],b[x[0]],b[x[1]]],k=[...((i=a.autoPlacement)==null?void 0:i.overflows)||[],{placement:p,overflows:v}],E=y[h+1];if(E)return{data:{index:h+1,overflows:k},reset:{placement:E}};const R=k.map(S=>{const T=V(S.placement);return[S.placement,T&&f?S.overflows.slice(0,2).reduce((q,D)=>q+D,0):S.overflows[0],S.overflows]}).sort((S,T)=>S[1]-T[1]),L=((r=R.filter(S=>S[2].slice(0,V(S[0])?2:3).every(T=>T<=0))[0])==null?void 0:r[0])||R[0][0];return L!==u?{data:{index:h+1,overflows:k},reset:{placement:L}}:{}})}}};function qt(t){const e=X(...t.map(r=>r.left)),n=X(...t.map(r=>r.top)),o=I(...t.map(r=>r.right)),i=I(...t.map(r=>r.bottom));return{x:e,y:n,width:o-e,height:i-n}}function ke(t){const e=t.slice().sort((i,r)=>i.y-r.y),n=[];let o=null;for(let i=0;i<e.length;i++){const r=e[i];!o||r.y-o.y>o.height/2?n.push([r]):n[n.length-1].push(r),o=r}return n.map(i=>Z(qt(i)))}const Re=function(t){return t===void 0&&(t={}),{name:"inline",options:t,fn(n){return N(this,null,function*(){const{placement:o,elements:i,rects:r,platform:s,strategy:a}=n,{padding:u=2,x:l,y:c}=et(t,n),f=Array.from((yield s.getClientRects==null?void 0:s.getClientRects(i.reference))||[]),d=ke(f),m=Z(qt(f)),g=vt(u);function w(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return d.find(b=>l>b.left-g.left&&l<b.right+g.right&&c>b.top-g.top&&c<b.bottom+g.bottom)||m;if(d.length>=2){if(st(o)==="y"){const A=d[0],S=d[d.length-1],T=j(o)==="top",q=A.top,D=S.bottom,z=T?A.left:S.left,Q=T?A.right:S.right,ot=Q-z,Zt=D-q;return{top:q,bottom:D,left:z,right:Q,width:ot,height:Zt,x:z,y:q}}const b=j(o)==="left",h=I(...d.map(A=>A.right)),p=X(...d.map(A=>A.left)),x=d.filter(A=>b?A.left===p:A.right===h),v=x[0].top,k=x[x.length-1].bottom,E=p,R=h,M=R-E,L=k-v;return{top:v,bottom:k,left:E,right:R,width:M,height:L,x:E,y:v}}return m}const y=yield s.getElementRects({reference:{getBoundingClientRect:w},floating:i.floating,strategy:a});return r.reference.x!==y.reference.x||r.reference.y!==y.reference.y||r.reference.width!==y.reference.width||r.reference.height!==y.reference.height?{reset:{rects:y}}:{}})}}};function Te(t,e){return N(this,null,function*(){const{placement:n,platform:o,elements:i}=t,r=yield o.isRTL==null?void 0:o.isRTL(i.floating),s=j(n),a=V(n),u=st(n)==="y",l=["left","top"].includes(s)?-1:1,c=r&&u?-1:1,f=et(e,t);let{mainAxis:d,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),u?{x:m*c,y:d*l}:{x:d*l,y:m*c}})}const Le=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(n){return N(this,null,function*(){var o,i;const{x:r,y:s,placement:a,middlewareData:u}=n,l=yield Te(n,t);return a===((o=u.offset)==null?void 0:o.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:_(C({},l),{placement:a})}})}}},Pe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,fn(n){return N(this,null,function*(){const{x:o,y:i,placement:r}=n,b=et(t,n),{mainAxis:s=!0,crossAxis:a=!1,limiter:u={fn:h=>{let{x:p,y:x}=h;return{x:p,y:x}}}}=b,l=mt(b,["mainAxis","crossAxis","limiter"]),c={x:o,y:i},f=yield Vt(n,l),d=st(j(r)),m=It(d);let g=c[m],w=c[d];if(s){const h=m==="y"?"top":"left",p=m==="y"?"bottom":"right",x=g+f[h],v=g-f[p];g=wt(x,g,v)}if(a){const h=d==="y"?"top":"left",p=d==="y"?"bottom":"right",x=w+f[h],v=w-f[p];w=wt(x,w,v)}const y=u.fn(_(C({},n),{[m]:g,[d]:w}));return _(C({},y),{data:{x:y.x-o,y:y.y-i,enabled:{[m]:s,[d]:a}}})})}}};function ut(){return typeof window!="undefined"}function nt(t){return _t(t)?(t.nodeName||"").toLowerCase():"#document"}function O(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function G(t){var e;return(e=(_t(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _t(t){return ut()?t instanceof Node||t instanceof O(t).Node:!1}function $(t){return ut()?t instanceof Element||t instanceof O(t).Element:!1}function F(t){return ut()?t instanceof HTMLElement||t instanceof O(t).HTMLElement:!1}function Ht(t){return!ut()||typeof ShadowRoot=="undefined"?!1:t instanceof ShadowRoot||t instanceof O(t).ShadowRoot}function ct(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=W(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function Ce(t){return["table","td","th"].includes(nt(t))}function Oe(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch(n){return!1}})}function bt(t){const e=Et(),n=$(t)?W(t):t;return["transform","translate","scale","rotate","perspective"].some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function De(t){let e=U(t);for(;F(e)&&!tt(e);){if(bt(e))return e;if(Oe(e))return null;e=U(e)}return null}function Et(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function tt(t){return["html","body","#document"].includes(nt(t))}function W(t){return O(t).getComputedStyle(t)}function dt(t){return $(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function U(t){if(nt(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ht(t)&&t.host||G(t);return Ht(e)?e.host:e}function Xt(t){const e=U(t);return tt(e)?t.ownerDocument?t.ownerDocument.body:t.body:F(e)&&ct(e)?e:Xt(e)}function Yt(t,e,n){var o;e===void 0&&(e=[]);const i=Xt(t),r=i===((o=t.ownerDocument)==null?void 0:o.body),s=O(i);return r?(He(s),e.concat(s,s.visualViewport||[],ct(i)?i:[],[])):e.concat(i,Yt(i,[]))}function He(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function jt(t){const e=W(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=F(t),r=i?t.offsetWidth:n,s=i?t.offsetHeight:o,a=ft(n)!==r||ft(o)!==s;return a&&(n=r,o=s),{width:n,height:o,$:a}}function Ut(t){return $(t)?t:t.contextElement}function J(t){const e=Ut(t);if(!F(e))return Y(1);const n=e.getBoundingClientRect(),{width:o,height:i,$:r}=jt(e);let s=(r?ft(n.width):n.width)/o,a=(r?ft(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Be=Y(0);function Gt(t){const e=O(t);return!Et()||!e.visualViewport?Be:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==O(t)?!1:e}function rt(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=Ut(t);let s=Y(1);e&&(o?$(o)&&(s=J(o)):s=J(t));const a=$e(r,n,o)?Gt(r):Y(0);let u=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(r){const d=O(r),m=o&&$(o)?O(o):o;let g=d,w=g.frameElement;for(;w&&o&&m!==g;){const y=J(w),b=w.getBoundingClientRect(),h=W(w),p=b.left+(w.clientLeft+parseFloat(h.paddingLeft))*y.x,x=b.top+(w.clientTop+parseFloat(h.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,f*=y.y,u+=p,l+=x,g=O(w),w=g.frameElement}}return Z({width:c,height:f,x:u,y:l})}const We=[":popover-open",":modal"];function St(t){return We.some(e=>{try{return t.matches(e)}catch(n){return!1}})}function Ne(t){let{elements:e,rect:n,offsetParent:o,strategy:i}=t;const r=i==="fixed",s=G(o),a=e?St(e.floating):!1;if(o===s||a&&r)return n;let u={scrollLeft:0,scrollTop:0},l=Y(1);const c=Y(0),f=F(o);if((f||!f&&!r)&&((nt(o)!=="body"||ct(s))&&(u=dt(o)),F(o))){const d=rt(o);l=J(o),c.x=d.x+o.clientLeft,c.y=d.y+o.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function Fe(t){return Array.from(t.getClientRects())}function zt(t){return rt(G(t)).left+dt(t).scrollLeft}function Me(t){const e=G(t),n=dt(t),o=t.ownerDocument.body,i=I(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),r=I(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+zt(t);const a=-n.scrollTop;return W(o).direction==="rtl"&&(s+=I(e.clientWidth,o.clientWidth)-i),{width:i,height:r,x:s,y:a}}function Ie(t,e){const n=O(t),o=G(t),i=n.visualViewport;let r=o.clientWidth,s=o.clientHeight,a=0,u=0;if(i){r=i.width,s=i.height;const l=Et();(!l||l&&e==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:r,height:s,x:a,y:u}}function Ve(t,e){const n=rt(t,!0,e==="fixed"),o=n.top+t.clientTop,i=n.left+t.clientLeft,r=F(t)?J(t):Y(1),s=t.clientWidth*r.x,a=t.clientHeight*r.y,u=i*r.x,l=o*r.y;return{width:s,height:a,x:u,y:l}}function Bt(t,e,n){let o;if(e==="viewport")o=Ie(t,n);else if(e==="document")o=Me(G(t));else if($(e))o=Ve(e,n);else{const i=Gt(t);o=_(C({},e),{x:e.x-i.x,y:e.y-i.y})}return Z(o)}function Kt(t,e){const n=U(t);return n===e||!$(n)||tt(n)?!1:W(n).position==="fixed"||Kt(n,e)}function qe(t,e){const n=e.get(t);if(n)return n;let o=Yt(t,[]).filter(a=>$(a)&&nt(a)!=="body"),i=null;const r=W(t).position==="fixed";let s=r?U(t):t;for(;$(s)&&!tt(s);){const a=W(s),u=bt(s);!u&&a.position==="fixed"&&(i=null),(r?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ct(s)&&!u&&Kt(t,s))?o=o.filter(c=>c!==s):i=a,s=U(s)}return e.set(t,o),o}function _e(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const s=[...n==="clippingAncestors"?St(e)?[]:qe(e,this._c):[].concat(n),o],a=s[0],u=s.reduce((l,c)=>{const f=Bt(e,c,i);return l.top=I(f.top,l.top),l.right=X(f.right,l.right),l.bottom=X(f.bottom,l.bottom),l.left=I(f.left,l.left),l},Bt(e,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Xe(t){const{width:e,height:n}=jt(t);return{width:e,height:n}}function Ye(t,e,n){const o=F(e),i=G(e),r=n==="fixed",s=rt(t,!0,r,e);let a={scrollLeft:0,scrollTop:0};const u=Y(0);if(o||!o&&!r)if((nt(e)!=="body"||ct(i))&&(a=dt(e)),o){const f=rt(e,!0,r,e);u.x=f.x+e.clientLeft,u.y=f.y+e.clientTop}else i&&(u.x=zt(i));const l=s.left+a.scrollLeft-u.x,c=s.top+a.scrollTop-u.y;return{x:l,y:c,width:s.width,height:s.height}}function gt(t){return W(t).position==="static"}function $t(t,e){return!F(t)||W(t).position==="fixed"?null:e?e(t):t.offsetParent}function Qt(t,e){const n=O(t);if(St(t))return n;if(!F(t)){let i=U(t);for(;i&&!tt(i);){if($(i)&&!gt(i))return i;i=U(i)}return n}let o=$t(t,e);for(;o&&Ce(o)&&gt(o);)o=$t(o,e);return o&&tt(o)&&gt(o)&&!bt(o)?n:o||De(t)||n}const je=function(t){return N(this,null,function*(){const e=this.getOffsetParent||Qt,n=this.getDimensions,o=yield n(t.floating);return{reference:Ye(t.reference,yield e(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}})};function Ue(t){return W(t).direction==="rtl"}const Ge={convertOffsetParentRelativeRectToViewportRelativeRect:Ne,getDocumentElement:G,getClippingRect:_e,getOffsetParent:Qt,getElementRects:je,getClientRects:Fe,getDimensions:Xe,getScale:J,isElement:$,isRTL:Ue},ze=Le,Ke=Ae,Qe=Pe,Je=Ee,Ze=Re,tn=(t,e,n)=>{const o=new Map,i=C({platform:Ge},n),r=_(C({},i.platform),{_c:o});return be(t,e,_(C({},i),{platform:r}))};let P,pt;const at=t=>t&&t+"px",en=(t,e=window)=>{P||(P=e.document.createElement("div"),P.classList.add("wp-popup"),P.style.visibility="hidden",t.appendChild(P),pt=e.document.createElement("div"),pt.classList.add("wp-popup-arrow"));const n={};return{show:(s,a,{x:u,y:l})=>{P.innerHTML=s+pt.outerHTML;const c=P.querySelector(".wp-popup-arrow");tn(a,P,{middleware:[Ze({x:u,y:l}),Qe(),Ke({allowedPlacements:["top","bottom"]}),ze(10),Je({element:c})]}).then(({x:f,y:d,middlewareData:m,placement:g})=>{if(P.style.top=at(d),P.style.left=at(f),m.arrow&&c){const{x:w,y}=m.arrow;c.style.left=w!==null?at(w):"",c.style.top=y!==null?at(y):"",g==="left"?(c.style.right="-8px",c.style.transform="rotate(90deg)"):g==="right"?(c.style.left="-8px",c.style.transform="rotate(-90deg)"):g==="top"?(c.style.bottom="-8px",c.style.transform="rotate(180deg)"):g==="bottom"&&(c.style.top="-8px")}P.currentTargetElement=a,P.style.visibility="visible",n.onShow&&n.onShow(P)})},hide:()=>{n.onHide&&n.onHide(P),P.style.visibility="hidden",P.currentTargetElement=null},subscribe:(s={})=>{s.onShow&&(n.onShow=s.onShow),s.onHide&&(n.onHide=s.onHide)},element:P}};let H,Jt;const nn=t=>{if(!t.querySelector(".wp-dark-screen")){const e=t.createElement("div");e.classList.add("wp-dark-screen"),t.body.appendChild(e),Jt=t.body.style.overflow,t.body.style.overflow="hidden"}},on=t=>{const e=t.getElementsByClassName("wp-dark-screen");t.body.removeChild(e[0]),t.body.style.overflow=Jt},rn=(t,e=window)=>{H||(H=e.document.createElement("div"),H.classList.add("wp-touch-popup"),H.style.visibility="hidden",t.appendChild(H));const n={};return{show:s=>{H.innerHTML=s,H.style.visibility="visible",nn(e.document),n.onShow&&n.onShow(H)},hide:()=>{n.onHide&&n.onHide(H),H.style.visibility="hidden",on(e.document)},subscribe:(s={})=>{s.onShow&&(n.onShow=s.onShow),s.onHide&&(n.onHide=s.onHide)},element:H}},it=(t,e,n)=>{const o=t&&t[e];if(o instanceof Function)try{o.apply(null,n)}catch(i){console.log("Error invoking Wikipedia Preview custom callback",i)}},sn=(t,e,n)=>{Ft(e,t,o=>{n(ht(e,o,B))})},Wt=(t,e)=>{const n=[];(typeof t=="string"||t instanceof String)&&Array.prototype.forEach.call(document.querySelectorAll(t),o=>{n.push(o)}),(t instanceof Document||t instanceof Element)&&n.push(t),Array.isArray(t)&&t.forEach(o=>{o instanceof Element&&n.push(o)}),n.forEach(o=>e(o))};let Nt,K;function cn({root:t=document,selector:e="[data-wikipedia-preview]",lang:n="en",detectLinks:o=!1,popupContainer:i=document.body,events:r={},debug:s=!1,prefersColorScheme:a="detect"}){i=re(i)||document.body;const u=n,l=B?rn(i):en(i),c=ge(l),f={},d=[],m=[];K=a;const g=(h,p=!1)=>{h.preventDefault(),h.stopPropagation();const x=Date.now(),{currentTarget:v}=p?f:h,k=p?f.title:decodeURIComponent(v.getAttribute("data-wp-title")||v.textContent),E=p?f.lang:v.getAttribute("data-wp-lang")||u,R=p?f.pointerPosition:{x:h.clientX,y:h.clientY},M=ce(E);l.element.currentTargetElement===v&&!p||(Nt=x,l.element.style.visibility==="visible"&&l.hide(),l.loading=!0,l.dir=M,l.show(fe(B,E,M,K),v,R),Ft(E,k,L=>{if(x===Nt&&l.loading){if(l.loading=!1,L.extractHtml){if(l.lang=E,l.title=k,L.type==="standard")l.show(ht(E,L,B,K),v,R),l.media=L.media,it(r,"onShow",[k,E,"standard"]);else if(L.type==="disambiguation"){const S=L.extractHtml?ht(E,L,B,K):ue(B,E,L.title,L.dir,K);l.show(S,v,R),it(r,"onShow",[k,E,"disambiguation"])}}else if(le())l.show(de(B,E,k,M,K),v,R),it(r,"onShow",[k,E,"error"]);else{l.show(me(B,E,M,K),v,R),it(r,"onShow",[k,E,"offline"]);const S=document.querySelector(".wikipediapreview-body-action");f.lang=E,f.title=k,f.pointerPosition=R,f.target=v,S.addEventListener("click",T=>{g(T,!0)})}const A=l.element.querySelector(".wikipediapreview-footer-cta-readonwiki, .wikipediapreview-cta-readonwiki");if(A&&A.addEventListener("click",()=>{it(r,"onWikiRead",[k,E])}),v.tagName==="A"){const S=ae().split("="),T=new URL(v.href);T.searchParams.set(S[0],S[1]),v.href=T.href}}}))},w=h=>{g(h)},y=h=>{h.addEventListener("pointerenter",w)},b=h=>{let p=null;h.addEventListener("pointerdown",x=>{p=x.pointerType}),h.addEventListener("click",x=>{p==="touch"&&(x.preventDefault(),x.stopPropagation())})};Wt(t,h=>{Array.prototype.forEach.call(h.querySelectorAll(e),p=>{y(p),d.push({text:p.textContent,title:p.getAttribute("data-wp-title")||p.textContent,lang:p.getAttribute("data-wp-lang")||u})})}),o&&Wt(t,h=>{Array.prototype.forEach.call(h.querySelectorAll("a"),p=>{const x=se(p.getAttribute("href"));x&&(p.setAttribute("data-wp-title",x.title),p.setAttribute("data-wp-lang",x.lang),y(p),b(p),m.push({text:p.textContent,title:x.title,lang:x.lang}))})}),l.subscribe(c),s&&(console.group("Wikipedia Preview [debug mode]"),console.group(`Searching for "${e}" inside ${t}, Total links found: ${d.length}`),d.forEach((h,p)=>{console.log(p+1,`${h.text} -> ${decodeURI(Lt(h.lang,h.title,B,!1))}`)}),console.groupEnd(),o&&(console.group(`Searching for links to Wikipedia, Total links found: ${m.length}`),m.forEach((h,p)=>{console.log(p+1,`${h.text} -> ${decodeURI(Lt(h.lang,h.title,B,!1))}`)}),console.groupEnd()),console.groupEnd())}Mt();const dn={init:cn,version:Mt,getPreviewHtml:sn,getSections:oe};export{dn as w};
